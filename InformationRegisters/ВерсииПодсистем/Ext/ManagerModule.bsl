
#Область Интерфейс

Функция ВерсияУЗ() Экспорт

	Запрос = Новый Запрос;
	Запрос.Текст =
	"ВЫБРАТЬ
	|	ВерсииПодсистем.Версия
	|ИЗ
	|	РегистрСведений.ВерсииПодсистем КАК ВерсииПодсистем
	|ГДЕ
	|	ВерсииПодсистем.ИмяПодсистемы = &ИмяПодсистемы";
	
	Запрос.УстановитьПараметр("ИмяПодсистемы", ИмяПодсистемы());
	
	Результат = Запрос.Выполнить().Выбрать();
	
	Если Результат.Следующий() Тогда
	
		Возврат Результат.Версия;
	
	КонецЕсли;
	
	Возврат "";

КонецФункции // ()

Функция ОбновитьВерсиюУЗ(НомерВерсии) Экспорт

	Запись = СоздатьМенеджерЗаписи();
	Запись.Версия = НомерВерсии;
	Запись.ИмяПодсистемы = ИмяПодсистемы();
	Запись.ВыполненаРегистрацияОтложенныхОбработчиков = Истина;
	Запись.ЭтоОсновнаяКонфигурация = Истина;
	
	Запись.Записать(Истина);

КонецФункции // ()

#КонецОбласти

#Область Техническая

Функция ИмяПодсистемы()

	Возврат Метаданные.Имя;

КонецФункции // ()

#КонецОбласти

