
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если Не ЗначениеЗаполнено(Объект.ЛимитКоличестваОтмен) Тогда
		Объект.ЛимитКоличестваОтмен = 10;
	КонецЕсли;
	
	Если Не Параметры.Ключ.Пустая() Тогда
	
		Ключи = ОбработкаБезопасноеХранилище.КлючиМандарин();

		Мандарин = ОбработкаБезопасноеХранилище.Получить(Объект.Ссылка, Ключи);
		
		Для каждого Ключ Из Ключи Цикл
		
			ЭтаФорма[Ключ] = Мандарин[Ключ];
		
		КонецЦикла;
	
	КонецЕсли;

	Пароль = ?(ЗначениеЗаполнено(Пароль), ЭтотОбъект.УникальныйИдентификатор, "");

КонецПроцедуры

&НаСервере
Процедура ПриЗаписиНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	
	Если ЛогинИзменен Тогда
	
		ЛогинИзменен = Ложь;
		ОбработкаБезопасноеХранилище.Записать(ТекущийОбъект.Ссылка, "Логин", Логин);
	
	КонецЕсли;
	
	Если ПарольИзменен Тогда
	
		ПарольИзменен = Ложь;
		ОбработкаБезопасноеХранилище.Записать(ТекущийОбъект.Ссылка, "Пароль", Пароль);
		Пароль = ?(ЗначениеЗаполнено(Пароль), ЭтотОбъект.УникальныйИдентификатор, "");
	
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура merchantIdПриИзменении(Элемент)
	ЛогинИзменен = Истина;
КонецПроцедуры

&НаКлиенте
Процедура secretПриИзменении(Элемент)
	ПарольИзменен = Истина;
КонецПроцедуры


