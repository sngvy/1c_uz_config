Функция ПолучитьПериодВыгрузкиДляКлиентБанка(ДанаНачалаВыгрузки = Неопределено) Экспорт

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ВЫРАЗИТЬ(ИсковыеТребования.Регистратор КАК Документ.СудебноеДело) КАК Регистратор,
		|	ИсковыеТребования.Регистратор.Дата КАК РегистраторДата
		|ПОМЕСТИТЬ втИсковыеТребованияСДаты
		|ИЗ
		|	РегистрНакопления.ИсковыеТребования КАК ИсковыеТребования
		|ГДЕ
		|	ИсковыеТребования.Регистратор ССЫЛКА Документ.СудебноеДело
		|	И ИсковыеТребования.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход)
		|	И ИсковыеТребования.Регистратор.Дата > &ДанаНачалаВыгрузки
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	МИНИМУМ(ИсковыеТребования.Регистратор.Дата) КАК ДатаНачала,
		|	МАКСИМУМ(ИсковыеТребования.Регистратор.Дата) КАК ДатаКонца
		|ИЗ
		|	втИсковыеТребованияСДаты КАК ИсковыеТребования";
	
	
	ДатаНачало = ДанаНачалаВыгрузки;
	Если ДатаНачало  = Неопределено Тогда
	
		ДатаНачало = РегистрыСведений.ДатыВыгрузкиВКлиентБанк.ДатаПоследнейВыгрузки();
	
	КонецЕсли;
	Запрос.УстановитьПараметр("ДанаНачалаВыгрузки", ДатаНачало);
	
	РезультатЗапроса = Запрос.Выполнить();
	ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
	
	ПериодВыгрузки = Новый Структура;
	ПериодВыгрузки.Вставить("ДатаНачала", Дата(1, 1, 1));
	ПериодВыгрузки.Вставить("ДатаКонца", ТекущаяДатаСеанса());
	
	Если ВыборкаДетальныеЗаписи.Следующий() Тогда
		
		ПериодВыгрузки.Вставить("ДатаНачала", ВыборкаДетальныеЗаписи.ДатаНачала);
		ПериодВыгрузки.Вставить("ДатаКонца", ВыборкаДетальныеЗаписи.ДатаКонца);
		
	КонецЕсли;
	
	Возврат ПериодВыгрузки;

КонецФункции // ()

